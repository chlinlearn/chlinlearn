<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RabbitMQ消息中间件快速入门 | IT老实人学习文档</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/wiki/images/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/wiki/assets/css/0.styles.78386221.css" as="style"><link rel="preload" href="/wiki/assets/js/app.a223f231.js" as="script"><link rel="preload" href="/wiki/assets/js/2.56f72b48.js" as="script"><link rel="preload" href="/wiki/assets/js/11.1ee17967.js" as="script"><link rel="prefetch" href="/wiki/assets/js/10.ee7905ca.js"><link rel="prefetch" href="/wiki/assets/js/12.1bd76c09.js"><link rel="prefetch" href="/wiki/assets/js/13.9f0a5b32.js"><link rel="prefetch" href="/wiki/assets/js/14.1a457e4e.js"><link rel="prefetch" href="/wiki/assets/js/15.efe9a90e.js"><link rel="prefetch" href="/wiki/assets/js/16.9e27ec9c.js"><link rel="prefetch" href="/wiki/assets/js/17.6378ef55.js"><link rel="prefetch" href="/wiki/assets/js/3.8a0da9ff.js"><link rel="prefetch" href="/wiki/assets/js/4.fd0c3bfb.js"><link rel="prefetch" href="/wiki/assets/js/5.87f39b86.js"><link rel="prefetch" href="/wiki/assets/js/6.c9f44ce5.js"><link rel="prefetch" href="/wiki/assets/js/7.bfaa9e56.js"><link rel="prefetch" href="/wiki/assets/js/8.af1d68b2.js"><link rel="prefetch" href="/wiki/assets/js/9.cb071fa6.js">
    <link rel="stylesheet" href="/wiki/assets/css/0.styles.78386221.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki/" class="home-link router-link-active"><img src="/wiki/images/logo.png" alt="IT老实人学习文档" class="logo"> <span class="site-name can-hide">IT老实人学习文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wiki/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/wiki/backend/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/wiki/fontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAv-pv2t3ytso-FMiwE2vj6Ooiz0F2zK4jxhJin0-nm2HRxhYOmBBBY2JB7mSdNmLD/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者头条
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wiki/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/wiki/backend/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/wiki/fontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAv-pv2t3ytso-FMiwE2vj6Ooiz0F2zK4jxhJin0-nm2HRxhYOmBBBY2JB7mSdNmLD/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者头条
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/wiki/backend/" aria-current="page" class="sidebar-link">介绍</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/backend/java/1.html" aria-current="page" class="active sidebar-link">RabbitMQ消息中间件快速入门</a></li><li><a href="/wiki/backend/java/2.html" class="sidebar-link">curl命令行工具常用命令及使用场景</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Golang</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务器</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rabbitmq消息中间件快速入门"><a href="#rabbitmq消息中间件快速入门" class="header-anchor">#</a> RabbitMQ消息中间件快速入门</h1> <h2 id="_1-amqp协议"><a href="#_1-amqp协议" class="header-anchor">#</a> <strong>1.AMQP协议</strong></h2> <p>RabbitMQ是完全基于AMQP协议实现的，所以先了解一下AMQP协议。</p> <p>AMQP，即Advanced Message Queuing Protocol，一个提供统一消息服务的应用层标准 <strong>高级消息队列协议</strong>（二进制应用层协议），是应用层协议的一个开放标准,为面向消息的中间件设计，兼容 JMS。</p> <p>基于此协议的客户端与消息中间件可传递消息，并不受客户端/中间件同产品，不同的开发语言等条件的限制。</p> <p><img src="http://cdn.chlinlearn.cloud/img/image2020-5-21_15-59-14.png" alt=""></p> <p><strong>先了解一下AMQP协议中间的几个重要概念</strong>：</p> <ul><li><p>Server：接收客户端的连接，实现AMQP实体服务。</p></li> <li><p>Connection：连接，应用程序与Server的网络连接，TCP连接。</p></li> <li><p>Channel：信道，消息读写等操作在信道中进行。客户端可以建立多个信道，每个信道代表一个会话任务。</p></li> <li><p>Message：消息，应用程序和服务器之间传送的数据，消息可以非常简单，也可以很复杂。有Properties和Body组成。Properties为外包装，可以对消息进行修饰，比如消息的优先级、延迟等高级特性；Body就是消息体内容。</p></li> <li><p>Virtual Host：虚拟主机，用于逻辑隔离。一个虚拟主机里面可以有若干个Exchange和Queue，同一个虚拟主机里面不能有相同名称的Exchange或Queue。</p></li> <li><p>Exchange：交换器，接收消息，按照路由规则将消息路由到一个或者多个队列。如果路由不到，或者返回给生产者，或者直接丢弃。RabbitMQ常用的交换器常用类型有direct、topic、fanout、headers四种。</p></li> <li><p>Binding：绑定，交换器和消息队列之间的虚拟连接，绑定中可以包含一个或者多个RoutingKey。</p></li> <li><p>RoutingKey：路由键，生产者将消息发送给交换器的时候，会发送一个RoutingKey，用来指定路由规则，这样交换器就知道把消息发送到哪个队列。路由键通常为一个“.”分割的字符串，例如“com.rabbitmq”。</p></li> <li><p>Queue：消息队列，用来保存消息，供消费者消费</p></li></ul> <h2 id="_2-rabbitmq"><a href="#_2-rabbitmq" class="header-anchor">#</a> <strong>2.RabbitMQ</strong></h2> <p><strong><img src="http://cdn.chlinlearn.cloud/img/image2020-5-21_15-55-42.png" alt=""></strong></p> <p><strong>rabbitMq特点：</strong></p> <ul><li><strong>可靠性：</strong> RabbitMQ使用一些机制来保证消息的可靠性，如持久化、传输确认及发布确认等。</li> <li><strong>灵活的路由：</strong> 在消息进入队列之前，通过交换器来路由消息。对于典型的路由功能，RabbitMQ 己经提供了一些内置的交换器来实现。针对更复杂的路由功能，可以将多个交换器绑定在一起，也可以通过插件机制来实现自己的交换器。这个后面会在我们将 RabbitMQ 核心概念的时候详细介绍到。</li> <li><strong>扩展性：</strong> 多个RabbitMQ节点可以组成一个集群，也可以根据实际业务情况动态地扩展集群中节点。</li> <li><strong>高可用性：</strong> 队列可以在集群中的机器上设置镜像，使得在部分节点出现问题的情况下队列仍然可用。</li> <li><strong>支持多种协议：</strong> RabbitMQ 除了原生支持 AMQP 协议，还支持 STOMP、MQTT 等多种消息中间件协议。</li> <li><strong>多语言客户端：</strong> RabbitMQ几乎支持所有常用语言，比如 Java、Python、Ruby、PHP、C#、JavaScript等。</li> <li><strong>易用的管理界面：</strong> RabbitMQ提供了一个易用的用户界面，使得用户可以监控和管理消息、集群中的节点等。在安装 RabbitMQ 的时候会介绍到，安装好 RabbitMQ 就自带管理界面。</li> <li><strong>插件机制：</strong> RabbitMQ 提供了许多插件，以实现从多方面进行扩展，当然也可以编写自己的插件。感觉这个有点类似 Dubbo 的 SPI机制。</li></ul> <p><strong>rabbitMq模型结构：</strong></p> <p><img src="http://cdn.chlinlearn.cloud/img/image2020-5-21_16-21-9.png" alt=""></p> <p><strong>rabbitMq交换器类型：</strong></p> <p><strong>fanout 类型的Exchange路由规则非常简单，它会把所有发送到该Exchange的消息路由到所有与它绑定的Queue中，不需要做任何判断操作，所以 fanout 类型是所有的交换机类型里面速度最快的。fanout 类型常用来广播消息。</strong></p> <p><strong>direct 类型的Exchange路由规则也很简单，它会把消息路由到那些 Bindingkey 与 RoutingKey 完全匹配的 Queue 中。</strong></p> <p><strong>topic类型的交换器在匹配规则上进行了扩展，它与 direct 类型的交换器相似，也是将消息路由到 BindingKey 和 RoutingKey 相匹配的队列中，但这里的匹配规则有些不同，它约定：</strong></p> <p>RoutingKey 为一个点号“．”分隔的字符串（被点号“．”分隔开的每一段独立的字符串称为一个单词），如 “com.rabbitmq.client”、“java.util.concurrent”、“com.hidden.client”;</p> <p>BindingKey 和 RoutingKey 一样也是点号“．”分隔的字符串；</p> <p>BindingKey 中可以存在两种特殊字符串“**”和“#”，用于做模糊匹配，其中“*”用于匹配一个单词，“#”用于匹配多个单词(可以是零个)。</p> <p><strong>headers （不推荐）类型的交换器不依赖于路由键的匹配规则来路由消息，而是根据发送的消息内容中的 headers 属性进行匹配。在绑定队列和交换器时制定一组键值对，当发送消息到交换器时，RabbitMQ会获取到该消息的 headers（也是一个键值对的形式)'对比其中的键值对是否完全匹配队列和交换器绑定时指定的键值对，如果完全匹配则消息会路由到该队列，否则不会路由到该队列。headers 类型的交换器性能会很差，而且也不实用，基本上不会看到它的存在</strong>；</p> <p>（全文完❤️）</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/26/2020, 3:10:46 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wiki/backend/" class="prev router-link-active">
        介绍
      </a></span> <span class="next"><a href="/wiki/backend/java/2.html">
        curl命令行工具常用命令及使用场景
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wiki/assets/js/app.a223f231.js" defer></script><script src="/wiki/assets/js/2.56f72b48.js" defer></script><script src="/wiki/assets/js/11.1ee17967.js" defer></script>
  </body>
</html>
