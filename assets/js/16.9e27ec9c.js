(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{370:function(t,s,a){"use strict";a.r(s);var n=a(42),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"阿里云函数计算初体验-构建api云接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里云函数计算初体验-构建api云接口"}},[t._v("#")]),t._v(" 阿里云函数计算初体验–构建API云接口")]),t._v(" "),a("h2",{attrs:{id:"一、概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、概念"}},[t._v("#")]),t._v(" 一、概念")]),t._v(" "),a("blockquote",[a("p",[t._v("函数计算是事件驱动的全托管计算服务。使用函数计算，您无需采购与管理服务器等基础设施，只需编写并上传代码。函数计算为您准备好计算资源，弹性地、可靠地运行任务，并提供日志查询、性能监控和报警等功能。")])]),t._v(" "),a("p",[t._v("​\t\t\t\t"),a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/p96487.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"二、免费额度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、免费额度"}},[t._v("#")]),t._v(" 二、免费额度")]),t._v(" "),a("blockquote",[a("p",[t._v("函数计算每月为您提供一定的免费额度。您的阿里云账户与RAM子账号共享每月免费的调用次数和执行时间额度。免费额度不会按月累积，在下一自然月起始时刻（1号零点）会清零，重新计算。具体免费额度如下：")]),t._v(" "),a("ul",[a("li",[t._v("调用次数：每月前100万次函数调用免费。")]),t._v(" "),a("li",[t._v("执行时间：每月前400,000（CU-秒）函数实例资源使用量免费。")]),t._v(" "),a("li",[t._v("免费额度只能在按量付费场景下使用。")])])]),t._v(" "),a("p",[t._v("哎呀，真香啊🤑！")]),t._v(" "),a("h2",{attrs:{id:"三、上手体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、上手体验"}},[t._v("#")]),t._v(" 三、上手体验")]),t._v(" "),a("p",[t._v("说白了就是咋们利用阿里云提供的serverless能力，再加上阿里给的一个免费额度，我们可以使用这样一个函数计算的功能快速构建一套自己的API云接口，对于阿里给的免费额度咋们用来学习和练习是足够的了。")]),t._v(" "),a("p",[t._v("在这之前，同学们要是有自己的备案域名，那会更好一些，没有呢也没有关系，阿里云的函数计算会给一个默认的域名给你访问，我这里是使用了自定义域名；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/p96542.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"步骤1-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-2"}},[t._v("#")]),t._v(" 👉步骤1,2")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("登录阿里云控制台，并开通函数计算服务；")]),t._v(" "),a("p",[t._v("按照步骤1,2指示创建服务；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029153140.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"步骤3-4-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-4-5"}},[t._v("#")]),t._v(" 👉步骤3,4,5")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("选择左侧菜单栏的"),a("strong",[t._v("服务/函数")]),t._v(";")]),t._v(" "),a("p",[t._v("按照步骤3,4新建一个"),a("strong",[t._v("HTTP函数")]),t._v("，并填写完成函数基本配置信息；")]),t._v(" "),a("p",[t._v("按照步骤5点击完成，这样就新建好了一个函数名为"),a("strong",[t._v("getInfo")]),t._v("的函数；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/image-20201029153226001.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029153448.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/image-20201029153757394.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"步骤6-7-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤6-7-8"}},[t._v("#")]),t._v(" 👉步骤6,7,8")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("回到函数列表，点击刚才创建的"),a("strong",[t._v("getInfo")]),t._v("函数；")]),t._v(" "),a("p",[t._v("按照步骤6,7指示，在index.js文件里编写自己的代码；(提示：由于在创建函数填写配置信息时，"),a("strong",[t._v("函数入口")]),t._v("填的是index.handler，那么入口文件必须命名为index.js，且入口函数名必须为handler)")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029154023.png",alt:""}})]),t._v(" "),a("p",[t._v("附上自己编写好的代码:")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get requset header")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reqHeader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" reqHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("token:{token}")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get request info")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" queries "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clientIP "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientIP\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// build response result")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reseult "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" clientIP"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        token"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        param"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" queries\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// response.setStatusCode(200)")]),t._v("\n    response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reseult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br")])]),a("p",[t._v("利用在线编辑的功能，将以上代码替换掉默认的代码；")]),t._v(" "),a("p",[t._v("按照步骤8指示完成保存；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029154122.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"步骤9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤9"}},[t._v("#")]),t._v(" 👉步骤9")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("函数保存成功后，鼠标下滑找到"),a("strong",[t._v("调试HTTP触发器")]),t._v("；")]),t._v(" "),a("p",[t._v("按照步骤9指示，复制阿里提供的"),a("strong",[t._v("默认访问路径")]),t._v("，因为是GET请求，我们可以直接在浏览器上请求这个接口；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029164147.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"步骤10-11-12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤10-11-12"}},[t._v("#")]),t._v(" 👉步骤10,11,12")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("步骤10,11,12是配置自定义域名，如果你暂时没有自己的域名，可以跳过；")]),t._v(" "),a("p",[t._v("同样，在左侧菜单栏选择"),a("strong",[t._v("自定义域名")]),t._v("，点击"),a("strong",[t._v("创建域名")]),t._v("；")]),t._v(" "),a("p",[t._v("按照步骤11输入自己的域名，并且复制下方阿里提供的默认域名，到你自己购买域名服务商那添加一条CNAME解析记录（如下图所示）；")]),t._v(" "),a("p",[t._v("按照步骤12的指示填写具体函数的访问路径，比如这里的**/demo/getInfo**，最终访问路径：http://api.fc.chlinlearn.cloud/demo/getInfo")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029162026.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029161639.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"psotman测试接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#psotman测试接口"}},[t._v("#")]),t._v(" 👉 PSOTMAN测试接口")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("img",{attrs:{src:"http://cdn.chlinlearn.cloud/img/20201029162430.png",alt:""}})]),t._v(" "),a("p",[t._v("（全文完❤️）")])])}),[],!1,null,null,null);s.default=r.exports}}]);